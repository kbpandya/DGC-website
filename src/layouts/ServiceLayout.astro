---
import Layout from './Layout.astro';
import { allServices } from '../data/services';

interface Props {
  title: string;
  description?: string;
}

const { title, description } = Astro.props;

const currentPath = Astro.url.pathname;
---

<Layout title={title} description={description}>
  <!-- Page Header -->
  <section class="bg-secondary pt-40 pb-16 relative overflow-hidden">
    <div class="absolute inset-0 opacity-5 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-4xl">
        <span class="text-accent-dark font-semibold tracking-wider uppercase text-sm mb-2 block">Medical Services</span>
        <h1 class="heading-1 text-primary mb-0">{title}</h1>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <div class="container mx-auto px-4 py-16">
    <div class="grid lg:grid-cols-12 gap-12">
      
      <!-- Sidebar Navigation (Desktop) -->
      <aside class="hidden lg:block lg:col-span-3">
        <div class="sticky top-32 max-h-[calc(100vh-10rem)] overflow-y-auto pr-2 custom-scrollbar">
          <div class="card overflow-hidden mb-8">
            <div class="bg-gray-50 p-4 border-b border-gray-100">
              <h3 class="text-primary font-semibold text-lg">Our Services</h3>
            </div>
                                    <nav class="flex flex-col">
                                      {allServices.map((service) => (
                                        <a 
                                          href={service.href} 
                                          class:list={[
                                            "px-4 py-3 border-b border-gray-50 hover:bg-secondary/50 transition-colors text-sm font-semibold",
                                            currentPath === service.href || currentPath === service.href + '/' 
                                              ? "text-accent-dark bg-secondary/30 border-l-4 border-l-accent-dark" 
                                              : "text-gray-800 border-l-4 border-l-transparent hover:text-primary"
                                          ]}
                                        >
                                          {service.title}
                                        </a>
                                      ))}
                                    </nav>
                                  </div>
                        
                                  <!-- Mini CTA -->
                                  <div class="card bg-primary p-6 text-white text-center shadow-lg">
                                    <h4 class="font-semibold text-xl mb-2">Need an Appointment?</h4>
                                    <p class="text-blue-50 text-sm mb-6">Our specialists are ready to help.</p>
                                    <button class="w-full bg-white text-primary font-semibold py-3 rounded-lg hover:bg-gray-100 transition-colors trigger-booking">
                                      Book Now
                                    </button>
                                  </div>
                                </div>
                              </aside>
                        
                              <!-- Content Area -->
                              <main class="lg:col-span-9">
                                <div class="prose prose-lg max-w-none text-description prose-headings:font-display prose-headings:text-primary prose-headings:font-semibold prose-a:text-accent-dark prose-li:marker:text-accent-dark">
                                  <slot />
                                </div>
                              </main>    </div>
  </div>
</Layout>
