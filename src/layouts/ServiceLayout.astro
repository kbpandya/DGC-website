---
import Layout from './Layout.astro';
import { allServices } from '../data/services';

interface Props {
  title: string;
  description?: string;
}

const { title, description } = Astro.props;

const currentPath = Astro.url.pathname;
---

<Layout title={title} description={description}>
  <!-- Page Header -->
  <section class="bg-secondary pt-40 pb-16 relative overflow-hidden">
    <div class="absolute inset-0 opacity-5 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-4xl">
        <span class="text-accent font-bold tracking-wider uppercase text-sm mb-2 block">Medical Services</span>
        <h1 class="heading-1 text-primary mb-0">{title}</h1>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <div class="container mx-auto px-4 py-16">
    <div class="grid lg:grid-cols-12 gap-12">
      
      <!-- Sidebar Navigation (Desktop) -->
      <aside class="hidden lg:block lg:col-span-3">
        <div class="sticky top-32 max-h-[calc(100vh-10rem)] overflow-y-auto pr-2 custom-scrollbar">
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-8">
            <div class="bg-gray-50 p-4 border-b border-gray-100">
              <h3 class="text-primary font-bold text-lg">Our Services</h3>
            </div>
            <nav class="flex flex-col">
              {allServices.map((service) => (
                <a 
                  href={service.href} 
                  class:list={[
                    "px-4 py-3 border-b border-gray-50 hover:bg-secondary/50 transition-colors text-sm font-medium",
                    currentPath === service.href || currentPath === service.href + '/' 
                      ? "text-accent bg-secondary/30 border-l-4 border-l-accent" 
                      : "text-gray-600 border-l-4 border-l-transparent hover:text-primary"
                  ]}
                >
                  {service.title}
                </a>
              ))}
            </nav>
          </div>

          <!-- Mini CTA -->
          <div class="bg-primary rounded-xl p-6 text-white text-center shadow-lg">
            <h4 class="font-bold text-xl mb-2">Need an Appointment?</h4>
            <p class="text-blue-100 text-sm mb-6">Our specialists are ready to help.</p>
            <button class="w-full bg-white text-primary font-bold py-3 rounded-lg hover:bg-gray-100 transition-colors trigger-booking">
              Book Now
            </button>
          </div>
        </div>
      </aside>

      <!-- Content Area -->
      <main class="lg:col-span-9">
        <div class="prose prose-lg max-w-none text-gray-600 prose-headings:font-display prose-headings:text-primary prose-headings:font-semibold prose-a:text-accent prose-li:marker:text-accent">
          <slot />
        </div>
      </main>

    </div>
  </div>
</Layout>
